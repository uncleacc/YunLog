# äº‘æ—¥è®° API æ–‡æ¡£ï¼ˆæ— ç”¨æˆ·è®¤è¯ç‰ˆï¼‰

> æœ¬æ–‡æ¡£é€‚ç”¨äºæ— ç”¨æˆ·è®¤è¯ç‰ˆæœ¬ï¼Œæ‰€æœ‰æ¥å£æ— éœ€ç™»å½•å³å¯ç›´æ¥è®¿é—®ã€‚

---

## ğŸ©º å¥åº·æ£€æŸ¥

### GET /api/v1/health
- åŠŸèƒ½ï¼šæ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸è¿è¡Œ
- å“åº”ç¤ºä¾‹ï¼š
```json
{
  "code": 200,
  "message": "success",
  "data": "äº‘æ—¥è®°APIæœåŠ¡è¿è¡Œæ­£å¸¸"
}
```

---

## ğŸ“‚ åˆ†ç±»ç®¡ç†

### GET /api/v1/categories
- åŠŸèƒ½ï¼šè·å–æ‰€æœ‰åˆ†ç±»åˆ—è¡¨
- å“åº”ï¼š`List<Category>`

### GET /api/v1/categories/{id}
- åŠŸèƒ½ï¼šè·å–åˆ†ç±»è¯¦æƒ…
- å“åº”ï¼š`Category`

### POST /api/v1/categories
- åŠŸèƒ½ï¼šåˆ›å»ºæ–°åˆ†ç±»
- è¯·æ±‚ä½“ï¼š
```json
{
  "name": "åˆ†ç±»å",
  "icon": "å›¾æ ‡",
  "color": "é¢œè‰²"
}
```
- å“åº”ï¼š`Category`

### PUT /api/v1/categories/{id}
- åŠŸèƒ½ï¼šæ›´æ–°åˆ†ç±»
- è¯·æ±‚ä½“åŒä¸Š
- å“åº”ï¼š`Category`

### DELETE /api/v1/categories/{id}
- åŠŸèƒ½ï¼šåˆ é™¤åˆ†ç±»
- å“åº”ï¼šæ— å†…å®¹

### GET /api/v1/categories/{id}/stats
- åŠŸèƒ½ï¼šè·å–åˆ†ç±»ç»Ÿè®¡ä¿¡æ¯
- å“åº”ï¼š
```json
{
  "totalCount": 10,
  "thisMonth": 2,
  "thisWeek": 1,
  "recentDiary": {
    "id": 1,
    "title": "æœ€è¿‘çš„æ—¥è®°æ ‡é¢˜",
    "createTime": "2025-10-14T12:00:00"
  }
}
```

---

## ğŸ“’ æ—¥è®°ç®¡ç†

### GET /api/v1/diaries
- åŠŸèƒ½ï¼šè·å–æ—¥è®°åˆ—è¡¨
- æŸ¥è¯¢å‚æ•°ï¼š
  - `page`ï¼ˆé»˜è®¤1ï¼‰
  - `limit`ï¼ˆé»˜è®¤20ï¼‰
  - `categoryId`ï¼ˆå¯é€‰ï¼‰
  - `keyword`ï¼ˆå¯é€‰ï¼Œæ¨¡ç³Šæœç´¢æ ‡é¢˜å’Œå†…å®¹ï¼‰
- å“åº”ï¼šåˆ†é¡µå¯¹è±¡ `PageResponse<Diary>`

### GET /api/v1/diaries/{id}
- åŠŸèƒ½ï¼šè·å–æ—¥è®°è¯¦æƒ…
- å“åº”ï¼š`Diary`

### POST /api/v1/diaries
- åŠŸèƒ½ï¼šåˆ›å»ºæ—¥è®°
- è¯·æ±‚ä½“ï¼š
```json
{
  "title": "æ—¥è®°æ ‡é¢˜",
  "content": "æ­£æ–‡å†…å®¹",
  "contentHtml": "HTMLå†…å®¹",
  "categoryId": 1
}
```
- å“åº”ï¼š`Diary`

### PUT /api/v1/diaries/{id}
- åŠŸèƒ½ï¼šæ›´æ–°æ—¥è®°
- è¯·æ±‚ä½“åŒä¸Š
- å“åº”ï¼š`Diary`

### DELETE /api/v1/diaries/{id}
- åŠŸèƒ½ï¼šåˆ é™¤æ—¥è®°ï¼ˆç§»åˆ°åƒåœ¾æ¡¶ï¼‰
- å“åº”ï¼šæ— å†…å®¹

### DELETE /api/v1/diaries/batch
- åŠŸèƒ½ï¼šæ‰¹é‡åˆ é™¤æ—¥è®°
- è¯·æ±‚ä½“ï¼š
```json
{
  "ids": [1, 2, 3]
}
```
- å“åº”ï¼šæ— å†…å®¹

---

## ğŸ—‘ï¸ åƒåœ¾æ¡¶ç®¡ç†

### GET /api/v1/trash
- åŠŸèƒ½ï¼šè·å–åƒåœ¾æ¡¶ä¸­çš„æ—¥è®°åˆ—è¡¨
- æŸ¥è¯¢å‚æ•°ï¼š`page`ã€`limit`
- å“åº”ï¼šåˆ†é¡µå¯¹è±¡ `PageResponse<Diary>`

### POST /api/v1/trash/{id}/restore
- åŠŸèƒ½ï¼šæ¢å¤æŒ‡å®šæ—¥è®°
- å“åº”ï¼šæ— å†…å®¹

### DELETE /api/v1/trash/{id}
- åŠŸèƒ½ï¼šæ°¸ä¹…åˆ é™¤æŒ‡å®šæ—¥è®°
- å“åº”ï¼šæ— å†…å®¹

### DELETE /api/v1/trash/clear
- åŠŸèƒ½ï¼šæ¸…ç©ºåƒåœ¾æ¡¶
- å“åº”ï¼šæ— å†…å®¹

### POST /api/v1/trash/batch-restore
- åŠŸèƒ½ï¼šæ‰¹é‡æ¢å¤æ—¥è®°
- è¯·æ±‚ä½“ï¼š
```json
{
  "ids": [1, 2, 3]
}
```
- å“åº”ï¼šæ— å†…å®¹

---

## ğŸ“¦ æ•°æ®ç»“æ„è¯´æ˜

### Category
```json
{
  "id": 1,
  "name": "åˆ†ç±»å",
  "icon": "å›¾æ ‡",
  "color": "é¢œè‰²",
  "isDefault": false,
  "createTime": "2025-10-14T12:00:00",
  "updateTime": "2025-10-14T12:00:00"
}
```

### Diary
```json
{
  "id": 1,
  "title": "æ—¥è®°æ ‡é¢˜",
  "content": "æ­£æ–‡å†…å®¹",
  "contentHtml": "HTMLå†…å®¹",
  "categoryId": 1,
  "isDeleted": false,
  "deletedTime": null,
  "createTime": "2025-10-14T12:00:00",
  "updateTime": "2025-10-14T12:00:00"
}
```

### PageResponse<T>
```json
{
  "content": [ ... ],
  "total": 100,
  "page": 1,
  "limit": 20
}
```

---

> å¦‚éœ€æ›´å¤šç¤ºä¾‹æˆ–æœ‰ç–‘é—®ï¼Œè¯·è”ç³»å¼€å‘è€…ã€‚
