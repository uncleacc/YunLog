# 云日记 APP（增强版）

一个基于 Uniapp + Vue3 开发的移动端日记应用，采用暖色系UI设计，支持富文本编辑、多媒体附件、垃圾桶恢复等完整功能。

## ✨ 项目特点

### 核心功能
- 📝 **富文本编辑**：支持粗体、斜体、下划线、删除线等文本格式
- 😊 **表情符号**：内置160+常用表情，随心表达
- 📸 **多媒体附件**：支持图片和视频上传，记录更丰富
- 🗑️ **垃圾桶机制**：30天缓冲期，防止误删，支持一键恢复
- 📊 **数据统计**：自动统计日记总数和连续记录天数
- 💾 **本地存储**：数据本地持久化，隐私安全
- 📱 **移动优先**：完美适配移动设备，流畅体验

### UI设计
- 🎨 **暖色系配色**：温馨舒适的视觉体验
- 🎯 **现代化界面**：卡片式布局，渐变效果
- 🔄 **流畅动画**：精心设计的交互动画
- 📐 **响应式布局**：适配不同尺寸屏幕

## 🚀 技术栈

- **前端框架**：Vue 3
- **UI框架**：Uniapp
- **构建工具**：Vite 5
- **语言**：JavaScript
- **样式**：CSS3（渐变、阴影、动画）

## 📦 快速开始

### 环境要求
- Node.js >= 16.0.0
- npm 或 yarn

### 安装依赖
```bash
npm install
```

### 开发运行

#### H5 开发（推荐）
```bash
npm run dev:h5
```
然后在浏览器中访问：`http://localhost:5173/`

**提示**：打开浏览器开发者工具（F12），切换到移动设备模式查看移动端效果。推荐使用 iPhone X 或类似尺寸的设备模式。

#### 微信小程序开发
```bash
npm run dev:mp-weixin
```
然后使用微信开发者工具打开 `dist/dev/mp-weixin` 目录。

### 生产构建

#### H5 构建
```bash
npm run build:h5
```

#### 微信小程序构建
```bash
npm run build:mp-weixin
```

## 📂 项目结构

```
uni-preset-vue-vite/
├── src/
│   ├── pages/              # 页面目录
│   │   ├── index/         # 日记列表页（首页）
│   │   │   └── index.vue
│   │   ├── detail/        # 日记详情页
│   │   │   └── detail.vue
│   │   ├── edit/          # 日记编辑页
│   │   │   └── edit.vue
│   │   └── trash/         # 垃圾桶页
│   │       └── trash.vue
│   ├── utils/             # 工具类
│   │   └── storage.js     # 本地存储管理
│   ├── static/            # 静态资源
│   │   └── logo.png
│   ├── App.vue            # 应用入口组件
│   ├── main.js            # 应用入口文件
│   ├── pages.json         # 页面配置
│   └── manifest.json      # 应用配置
├── index.html             # HTML 入口
├── vite.config.js         # Vite 配置
├── package.json           # 项目配置
├── progress.md            # 开发进度文档
└── README.md              # 项目说明
```

## 📖 功能说明

### 1. 日记列表页（首页）
**路径**：`/pages/index/index`

**功能**：
- 📊 顶部统计卡片（日记总数、连续天数）
- 📋 日记列表展示（卡片式布局）
- 🖼️ 附件缩略图预览（最多显示3张）
- ✏️ 快速编辑和删除操作
- ➕ 右下角悬浮添加按钮
- 🗑️ 左下角垃圾桶入口
- 🎭 空状态友好提示

### 2. 日记详情页
**路径**：`/pages/detail/detail`

**功能**：
- 📅 顶部日期信息展示
- 🖼️ 附件横向滚动浏览
- 🔍 点击图片放大预览
- 📝 完整内容展示
- ⏰ 显示最后编辑时间
- 🔙 返回和编辑操作

### 3. 日记编辑页
**路径**：`/pages/edit/edit`

**功能**：
- 📎 **附件管理**：
  - 拍照上传
  - 从相册选择图片
  - 选择视频
  - 删除附件
  - 最多支持9个附件
  
- ✍️ **富文本编辑**：
  - **B** 粗体
  - *I* 斜体
  - <u>U</u> 下划线
  - ~~S~~ 删除线
  
- 😊 **表情选择器**：
  - 160+常用表情
  - 分类浏览
  - 快速插入
  
- 📝 **基础功能**：
  - 标题输入（最多50字）
  - 内容输入（最多5000字）
  - 实时字数统计
  - 表单验证

### 4. 垃圾桶页
**路径**：`/pages/trash/trash`

**功能**：
- 🗑️ 查看已删除日记
- ⏰ 显示剩余天数（30天倒计时）
- ↩️ 一键恢复日记
- 🗑️ 永久删除
- 🧹 清空回收站
- ⚡ 自动清理超过30天的日记

## 💾 数据结构

### 日记对象
```javascript
{
  id: String,              // 唯一标识（时间戳）
  title: String,           // 标题
  content: String,         // 纯文本内容
  contentHtml: String,     // HTML格式内容（富文本）
  attachments: Array,      // 附件数组 [{type, url}]
  createTime: String,      // 创建时间（ISO格式）
  updateTime: String       // 更新时间（ISO格式）
}
```

### 附件对象
```javascript
{
  type: String,   // 'image' 或 'video'
  url: String     // 文件路径
}
```

### 垃圾桶对象
```javascript
{
  ...日记对象,
  deletedTime: String  // 删除时间（ISO格式）
}
```

## 🎨 配色方案

```css
/* 主色调 */
--primary-color: #FF9A76;        /* 暖橙色 */
--secondary-color: #FF7E5F;      /* 深橙色 */
--background-color: #FFF5F0;     /* 米白色 */
--card-background: #FFFFFF;       /* 卡片背景 */

/* 文本颜色 */
--text-primary: #333333;          /* 主文本 */
--text-secondary: #666666;        /* 次要文本 */
--text-tertiary: #999999;         /* 辅助文本 */

/* 渐变色 */
--gradient: linear-gradient(135deg, #FF9A76 0%, #FF7E5F 100%);

/* 功能色 */
--success-color: #4CAF50;         /* 成功/恢复 */
--danger-color: #FF6B6B;          /* 危险/删除 */
--warning-color: #FFD5A0;         /* 警告/提示 */
```

## 🔧 API 文档

### Storage API

#### 日记管理

**GetDiaryList()**
- 获取所有日记列表
- 返回：`Array<Diary>` - 日记数组

**AddDiary(diary)**
- 添加新日记
- 参数：`diary` - 日记对象（无需id、createTime、updateTime）
- 返回：`Diary | null` - 添加成功返回完整日记对象，失败返回null

**GetDiaryById(id)**
- 根据ID获取日记
- 参数：`id` - 日记ID
- 返回：`Diary | null` - 日记对象或null

**UpdateDiary(id, diary)**
- 更新日记
- 参数：
  - `id` - 日记ID
  - `diary` - 更新的数据
- 返回：`Diary | null` - 更新后的日记对象或null

**DeleteDiary(id)**
- 删除日记（移到垃圾桶）
- 参数：`id` - 日记ID
- 返回：`Boolean` - 成功返回true，失败返回false

#### 垃圾桶管理

**GetTrashList()**
- 获取垃圾桶列表（自动清理超过30天的）
- 返回：`Array<Diary>` - 已删除日记数组

**RestoreFromTrash(id)**
- 从垃圾桶恢复日记
- 参数：`id` - 日记ID
- 返回：`Boolean` - 成功返回true，失败返回false

**PermanentDeleteDiary(id)**
- 永久删除日记
- 参数：`id` - 日记ID
- 返回：`Boolean` - 成功返回true，失败返回false

**ClearTrash()**
- 清空垃圾桶
- 返回：`Boolean` - 成功返回true，失败返回false

## 🌐 浏览器支持

- ✅ Chrome（推荐）
- ✅ Safari
- ✅ Firefox
- ✅ Edge

**移动端**：
- ✅ iOS Safari
- ✅ Android Chrome
- ✅ 微信内置浏览器

## 💡 使用指南

### 创建日记
1. 点击右下角 ➕ 按钮
2. 选择需要的文本格式
3. 点击表情按钮添加表情
4. 点击附件按钮上传图片或视频
5. 输入标题和内容
6. 点击保存

### 编辑日记
- 方法1：在列表页点击日记卡片，进入详情页，点击"编辑"
- 方法2：在列表页直接点击 ✏️ 图标

### 删除与恢复
1. **删除**：在列表页点击 🗑️ 图标
2. **恢复**：点击左下角垃圾桶图标，找到要恢复的日记，点击"恢复"
3. **永久删除**：在垃圾桶页面点击"永久删除"或等待30天自动清理

### 附件管理
- **添加**：在编辑页面点击附件按钮（📎），选择拍照、相册或视频
- **删除**：点击附件右上角的 × 按钮
- **预览**：在详情页点击附件即可查看大图或播放视频

## ❓ 常见问题

### Q: 数据会丢失吗？
A: 数据保存在浏览器本地存储中，清除浏览器数据会导致数据丢失。建议定期备份重要内容。

### Q: 为什么删除后还能看到日记？
A: 删除的日记会进入垃圾桶，保留30天。30天后自动清理，或者可以手动永久删除。

### Q: 附件会占用很多空间吗？
A: 附件保存在本地，H5模式下存储在浏览器缓存中。建议不要上传过大的视频文件。

### Q: 可以在小程序中使用吗？
A: 可以，运行 `npm run dev:mp-weixin` 即可在微信小程序中使用。

### Q: 如何修改配色？
A: 在 `src/App.vue` 和各页面组件中搜索颜色代码（如 `#FF9A76`）进行替换。

### Q: 富文本格式能保存吗？
A: 目前支持格式标记的保存，但显示时仍为纯文本。后续版本会增强富文本显示功能。

## 🛠️ 开发说明

### 添加新功能
1. 在 `src/pages/` 目录下创建新页面
2. 在 `src/pages.json` 中注册新页面路由
3. 根据需要修改 `src/utils/storage.js` 添加新的数据操作方法

### 自定义样式
- **全局样式**：修改 `src/App.vue` 中的 `<style>` 部分
- **页面样式**：在各页面的 `<style scoped>` 中修改

### 修改配色
在 `src/App.vue` 和各页面文件中搜索颜色值进行替换：
- 主色：`#FF9A76`
- 辅助色：`#FF7E5F`
- 背景色：`#FFF5F0`

## 📝 版本历史

### V2.0（当前版本）- 2025-10-12
**新增功能**：
- ✨ 垃圾桶机制（30天缓冲期）
- 📸 图片和视频附件支持
- ✍️ 富文本编辑工具栏
- 😊 表情符号选择器（160+）
- 🖼️ 附件缩略图预览

**移除功能**：
- ❌ 心情选择器
- ❌ 天气选择器

**优化改进**：
- 🎨 UI细节优化
- ⚡ 性能优化
- 🐛 Bug修复

### V1.0 - 2025-10-12
**基础功能**：
- 日记列表、详情、编辑
- 心情和天气选择
- 本地存储
- 连续天数统计

## 🚧 未来计划

### 短期计划
- [ ] 附件拖拽排序
- [ ] 富文本样式显示
- [ ] Markdown 语法支持
- [ ] 日记搜索功能
- [ ] 标签分类系统

### 中期计划
- [ ] 数据云同步
- [ ] 多设备同步
- [ ] 数据导出/备份
- [ ] 主题切换
- [ ] 夜间模式

### 长期计划
- [ ] 社交分享
- [ ] 数据统计图表
- [ ] AI 写作助手
- [ ] 语音输入
- [ ] 密码保护

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License

## 📧 联系方式

如有问题或建议，欢迎反馈。

---

**享受记录生活的美好时光！✨**

**让每一天都值得被记住 📝**
